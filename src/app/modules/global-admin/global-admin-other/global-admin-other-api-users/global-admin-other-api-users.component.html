<app-card>
  <app-card-header title="Brugere med rettighedshaveradgang" i18n-title></app-card-header>
  @if ((isLoadingUsersWithRightsholderAccess$ | async) !== true) {
    @if (usersWithRightsholderAccess$ | async; as usersWithRightsholderAccess) {
      @if (usersWithRightsholderAccess.length > 0) {
        <app-native-table tableLayout="fixed">
          <thead>
            <th width="30%" i18n>Organisation</th>
            <th width="30%" i18n>Navn</th>
            <th width="30%" i18n>Email</th>
            <th width="10%" i18n>API bruger</th>
          </thead>
          <tbody>
            @for (user of usersWithRightsholderAccess; track user) {
              <tr>
                <td>
                  <app-paragraph paragraphSize="medium" [cropOnOverflow]="true">{{ user.orgName }}</app-paragraph>
                </td>
                <td>
                  <app-paragraph paragraphSize="medium" [cropOnOverflow]="true">{{ user.name }}</app-paragraph>
                </td>
                <td>
                  <app-paragraph paragraphSize="medium" [cropOnOverflow]="true">{{ user.email }}</app-paragraph>
                </td>
                <td>
                  @if (user.apiAccess) {
                    <app-check-positive-green-icon></app-check-positive-green-icon>
                  }
                  @if (user.apiAccess === false) {
                    <app-check-negative-gray-icon></app-check-negative-gray-icon>
                  }
                </td>
              </tr>
            }
          </tbody>
        </app-native-table>
      }
      @if (usersWithRightsholderAccess.length === 0) {
        <app-empty-state
          text="Ingen brugere med rettighedshaveradgang fundet"
          i18n-text
          context="emptyTable"
        ></app-empty-state>
      }
    }
  }
  @if (isLoadingUsersWithRightsholderAccess$ | async) {
    <app-loading></app-loading>
  }
</app-card>

<app-card>
  <app-card-header title="Brugere med tværgående rettigheder" i18n-title></app-card-header>
  @if ((isLoadingUsersWithCrossAccess$ | async) !== true) {
    @if (usersWithCrossAccess$ | async; as usersWithCrossAccess) {
      @if (usersWithCrossAccess.length > 0) {
        <app-native-table tableLayout="fixed">
          <thead>
            <th width="35" i18n>Navn</th>
            <th width="35" i18n>Email</th>
            <th width="10" i18n>API bruger</th>
            <th width="10" i18n>Interessentadgang</th>
            <th width="10" i18n>Se organisationer</th>
          </thead>
          <tbody>
            @for (user of usersWithCrossAccess; track user) {
              <tr>
                <td>
                  <app-paragraph paragraphSize="medium" [cropOnOverflow]="true">{{ user.name }}</app-paragraph>
                </td>
                <td>
                  <app-paragraph paragraphSize="medium" [cropOnOverflow]="true">{{ user.email }}</app-paragraph>
                </td>
                <td>
                  @if (user.apiAccess) {
                    <app-check-positive-green-icon></app-check-positive-green-icon>
                  }
                  @if (user.apiAccess === false) {
                    <app-check-negative-gray-icon></app-check-negative-gray-icon>
                  }
                </td>
                <td>
                  @if (user.stakeholderAccess) {
                    <app-check-positive-green-icon></app-check-positive-green-icon>
                  }
                  @if (user.stakeholderAccess === false) {
                    <app-check-negative-gray-icon></app-check-negative-gray-icon>
                  }
                </td>
                <td>
                  <app-icon-button
                    data-cy="show-organizations-button"
                    tooltipText="Organisationer"
                    i18n-tooltipText
                    (click)="showOrganizations(user.organizationsWhereActive)"
                    ><app-eye-icon></app-eye-icon
                  ></app-icon-button>
                </td>
              </tr>
            }
          </tbody>
        </app-native-table>
      }
      @if (usersWithCrossAccess.length === 0) {
        <app-empty-state
          text="Ingen brugere med tværgående rettigheder fundet"
          i18n-text
          context="emptyTable"
        ></app-empty-state>
      }
    }
  }
  @if (isLoadingUsersWithRightsholderAccess$ | async) {
    <app-loading></app-loading>
  }
</app-card>
