<app-card>
  <app-card-header title="Tilknyttede opgaver" helpTextKey="it-system.edit.kle" i18n-title></app-card-header>
  <app-standard-vertical-content-grid>
    @if (anyLocalKleUuids$ | async) {
      <app-kle-table
        (kleCommandRequested)="onRemoveLocalKleRequested($event)"
        [hasModifyPermission]="(hasModifyPermission$ | async) === true"
        [selectedKles]="localKleUuidsWithActions$"
      ></app-kle-table>
      <app-textbox-info
        ><app-paragraph paragraphSize="small" i18n
        >Forslag til justering af KLE opm√¶rkning kan sendes til:
          <a href="mailto:info@kitos.dk">info&#64;kitos.dk</a></app-paragraph
        ></app-textbox-info
        >
      }
      @if ((anyLocalKleUuids$ | async) === false) {
        <app-empty-state
          text="Der er endnu ikke registreret tilknyttede opgaver"
          context="emptyTable"
          i18n-text
        ></app-empty-state>
      }
      @if (hasModifyPermission$ | async) {
        <app-collection-extension-button
          text="Tilknyt opgave"
          i18n-text
          data-cy="addKleButton"
          (clicked)="onAddNew()"
          >
        </app-collection-extension-button>
      }
    </app-standard-vertical-content-grid>
  </app-card>
