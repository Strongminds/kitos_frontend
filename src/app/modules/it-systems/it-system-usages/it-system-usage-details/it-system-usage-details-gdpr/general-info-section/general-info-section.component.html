<app-card>
  <app-card-header title="Generel information" helpTextKey="it-system.usage.gdpr.general" i18n-title></app-card-header>

  <app-form-grid [formGroup]="generalInformationForm">
    @if (purposeEnabled$ | async) {
      <app-textbox
        text="Systemets overordnede formÃ¥l"
        i18n-text
        class="two-thirds-column-width"
        [formGroup]="generalInformationForm"
        formName="purpose"
        [maxLength]="250"
        (valueChange)="patchGdpr({ purpose: $event })"
      ></app-textbox>
    }
    @if (businessCriticalEnabled$ | async) {
      <app-dropdown
        text="Forretningskritisk IT-System"
        i18n-text
        [formGroup]="generalInformationForm"
        formName="businessCritical"
        [data]="businessCriticalOptions"
        (valueChange)="patchGdpr({ businessCritical: $event })"
      ></app-dropdown>
    }
    @if (hostedAtEnabled$ | async) {
      <app-dropdown
        text="IT-systemet driftes"
        i18n-text
        [formGroup]="generalInformationForm"
        formName="hostedAt"
        [data]="hostedAtOptions"
        (valueChange)="patchGdpr({ hostedAt: $event })"
      ></app-dropdown>
    }
    @if (documentationEnabled$ | async) {
      <app-edit-url-section
        title="Link til fortegnelse"
        [simpleLink$]="selectDirectoryDocumentation$"
        i18n-title
        data-cy="directory-documentation-link"
        (submitMethod)="patchSimpleLink($event)"
        (clearClick)="resetSimpleLink()"
        [isDisabled]="disableDirectoryDocumentationControl"
      ></app-edit-url-section>
    }
    <app-tooltip [text]="(gdprCriticalityModifyEnabled$ | async) === false ? supplierMessage : ''">
      @if (gdprCriticalityEnabled$ | async) {
        <app-dropdown
          text="Kritikalitet"
          i18n-text
          [data]="gdprCriticalityOptions"
          [formGroup]="generalInformationForm"
          formName="gdprCriticality"
          (valueChange)="patchGdpr({ gdprCriticality: $event })"
        ></app-dropdown>
      }
    </app-tooltip>
  </app-form-grid>
</app-card>
