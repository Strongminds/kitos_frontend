@if (showGeneralInfo$ | async) {
  <app-general-info-section
    (noPermissions)="disableFormsIfNoPermissions($event)"
    [disableLinkControl]="disableLinkControls"
  ></app-general-info-section>
}

@if (showMoreInformation$ | async) {
  <app-card>
    <app-card-header title="Yderligere information" helpTextKey="it-system.usage.GDPR" i18n-title
      ><app-button
      secondary-content
      (buttonClick)="changeAllClick()"
      buttonStyle="secondary"
      data-cy="extra-header-button"
      >{{ expandAllButtonText$ | async }}</app-button
      ></app-card-header
      >
      <app-standard-vertical-content-grid>
        @if (showDataTypes$ | async) {
          <app-data-sensitivity-section
            (noPermissions)="disableFormsIfNoPermissions($event)"
            [isExpanded$]="dataSensitivityExpanded$"
            (expandedChanged)="expandedSectionChanged($event, 'data-sensitivity')"
            data-cy="data-sensitivity-accordion"
          ></app-data-sensitivity-section>
        }
        @if (registeredCategoriesEnabled$ | async) {
          <app-registered-data-categories-section
            (noPermissions)="disableFormsIfNoPermissions($event)"
            [isExpanded$]="registeredCategoriesExpanded$"
            (expandedChanged)="expandedSectionChanged($event, 'registered-categories')"
            data-cy="registed-categories-accordion"
          ></app-registered-data-categories-section>
        }
        @if (userSupervisionEnabled$ | async) {
          <app-gdpr-user-supervision-section
            (noPermissions)="disableFormsIfNoPermissions($event)"
            [isExpanded$]="userSupervisionExpanded$"
            (expandedChanged)="expandedSectionChanged($event, 'user-supervision')"
            data-cy="user-supervision-accordion"
          ></app-gdpr-user-supervision-section>
        }
        @if (technicalPrecautionsEnabled$ | async) {
          <app-gdpr-technical-precautions-section
            (noPermissions)="disableFormsIfNoPermissions($event)"
            [disableLinkControl]="disableLinkControls"
            [isExpanded$]="technicalPrecautionsExpanded$"
            (expandedChanged)="expandedSectionChanged($event, 'technical-precautions')"
            data-cy="technical-precautions-accordion"
          ></app-gdpr-technical-precautions-section>
        }
        @if (showRiskAssessment$ | async) {
          <app-gdpr-risk-assessment-section
            (noPermissions)="disableFormsIfNoPermissions($event)"
            [disableLinkControl]="disableLinkControls"
            [isExpanded$]="riskAssessmentExpanded$"
            (expandedChanged)="expandedSectionChanged($event, 'risk-assessment')"
            data-cy="risk-assessment-accordion"
          ></app-gdpr-risk-assessment-section>
        }
        @if (showDpiaConducted$ | async) {
          <app-gdpr-dpia-conducted-section
            (noPermissions)="disableFormsIfNoPermissions($event)"
            [isExpanded$]="dpiaConductedExpanded$"
            (expandedChanged)="expandedSectionChanged($event, 'dpia-conducted')"
          ></app-gdpr-dpia-conducted-section>
        }
        @if (showRetentionPeriod$ | async) {
          <app-gdpr-retention-period-section
            (noPermissions)="disableFormsIfNoPermissions($event)"
            [isExpanded$]="retentionPeriodExpanded$"
            (expandedChanged)="expandedSectionChanged($event, 'retention-period')"
          ></app-gdpr-retention-period-section>
        }
      </app-standard-vertical-content-grid>
    </app-card>
  }
