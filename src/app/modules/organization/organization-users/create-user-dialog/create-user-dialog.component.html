<app-dialog title="Opret bruger" i18n-title>
  <form [formGroup]="createForm" (submit)="sendCreateUserRequest()">
    <app-standard-vertical-content-grid>
      <app-textbox text="Fornavn*" i18n-text [formGroup]="createForm" formName="firstName"></app-textbox>
      <app-textbox text="Efternavn*" i18n-text [formGroup]="createForm" formName="lastName"></app-textbox>
      <div>
        <app-textbox text="Email*" i18n-text [formGroup]="createForm" formName="email"></app-textbox>
        <app-paragraph *ngIf="alreadyExists$ | async" color="error" i18n data-cy="error-message"
          >Brugeren er allerede tilknyttet.</app-paragraph
        >
      </div>
      <app-textbox text="Gentag email*" i18n-text [formGroup]="createForm" formName="repeatEmail"></app-textbox>
      <app-numeric-input
        text="Telefonnumer"
        i18n-text
        [formGroup]="createForm"
        formName="phoneNumber"
      ></app-numeric-input>
      <app-dropdown
        text="Primær startenhed"
        i18n-text
        [formGroup]="createForm"
        formName="startPreference"
        [data]="startPreferenceOptions"
      ></app-dropdown>
      <app-checkbox
        text="Send advis om ændringer"
        i18n-text
        [formGroup]="createForm"
        labelPosition="after"
        formName="sendNotificationOnCreation"
      >
      </app-checkbox>
      <ng-container *ngIf="(isGlobalAdmin$ | async) === true">
        <app-divider></app-divider>
        <div>
          <app-vertical-content-grid-section-margin-left>
            <app-paragraph i18n [bold]="true">Særlige roller i organisationen</app-paragraph>
          </app-vertical-content-grid-section-margin-left>
          <app-checkbox
            text="Rettighedshaveradgang"
            i18n-text
            [formGroup]="createForm"
            labelPosition="after"
            formName="rightsHolderAccess"
          ></app-checkbox>
        </div>
        <app-divider></app-divider>
        <div>
          <app-vertical-content-grid-section-margin-left>
            <app-paragraph i18n [bold]="true">Tværgående rettigheder</app-paragraph>
          </app-vertical-content-grid-section-margin-left>
          <app-checkbox
            text="API bruger"
            i18n-text
            [formGroup]="createForm"
            labelPosition="after"
            formName="apiUser"
          ></app-checkbox>
          <app-checkbox
            text="Interessentadgang"
            i18n-text
            [formGroup]="createForm"
            labelPosition="after"
            formName="stakeholderAccess"
          ></app-checkbox>
        </div>
      </ng-container>
      <div class="dialog-footer">
        <app-dialog-actions class="dialog-footer">
          <app-button i18n buttonStyle="secondary" (buttonClick)="onCancel()">Annuller</app-button>
          <app-button i18n type="submit" [disabled]="isFormValid() === false || (isLoadingCombined$ | async) === true"
            >Opret bruger</app-button
          >
        </app-dialog-actions>
      </div>
    </app-standard-vertical-content-grid>
  </form>
</app-dialog>
