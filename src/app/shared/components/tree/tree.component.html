<mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
  <!-- This is the tree node template for leaf nodes -->
  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
    <!--
      TODO: Not a generic tree but an entity tree
      TODO: ItemType should be injected
      TODO: link should be optional
      TODO: Emphasized should be a parameter (the current)
      TODO: Status -->
    <app-details-page-link itemType="it-system" linkFontSize="small" [itemUuid]="node.node.uuid">
      {{ node.node.name }}
    </app-details-page-link>
  </mat-tree-node>

  <!-- This is the tree node template for expandable nodes -->
  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
    <div class="mat-tree-node">
      <button mat-icon-button matTreeNodeToggle>
        <app-chevron-down-icon *ngIf="treeControl.isExpanded(node)"></app-chevron-down-icon>
        <app-chevron-right-icon *ngIf="treeControl.isExpanded(node) === false"></app-chevron-right-icon>
      </button>
      <app-details-page-link itemType="it-system" linkFontSize="small" [itemUuid]="node.node.uuid">
        {{ node.node.name }}
      </app-details-page-link>
    </div>
    <div [class.invisible]="!treeControl.isExpanded(node)" role="group">
      <ng-container matTreeNodeOutlet></ng-container>
    </div>
  </mat-nested-tree-node>
</mat-tree>
