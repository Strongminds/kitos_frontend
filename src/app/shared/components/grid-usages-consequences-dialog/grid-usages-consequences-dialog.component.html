<app-scrollbar-dialog
  [title]="title"
>
  <app-paragraph
    [bold]="true"
    paragraphSize="x-large"
    i18n
  >Opsummering af konsekvenser ved flytning af anvendelse</app-paragraph>

  <app-standard-vertical-content-grid>
    <app-paragraph i18n>
      For at sikre datakvaliteten i Kitos – og f.eks. komme redundante registreringer til livs - har global admin mulighed for at flytte jeres anvendelse fra et IT-system til et andet.
      I forbindelse med, at global admin har flyttet jeres system anvendelse fra et IT-system til et andet, kan det oplyses at:
    </app-paragraph>

    <ng-container *ngIf="(migration$ | async) as migration">
      <app-card>
        <app-paragraph i18n [bold]="true" paragraphSize="medium">Systemanvendelsen flyttes:</app-paragraph>
        <app-native-table>
          <thead>
            <th i18n>Fra</th>
            <th i18n>Til</th>
          </thead>
          <tbody>
            <tr>
              <td>{{ migration.fromSystem?.name }}</td>
              <td>{{ migration.toSystem?.name }}</td>
            </tr>
          </tbody>
        </app-native-table>
      </app-card>

      <app-card *ngIf="migration.affectedContracts !== undefined && migration.affectedContracts.length > 0">
        <app-usage-migration-consequences-table
        title="Følgende registreringer i modulet 'Kontrakter' berøres:"
        i18n-title
        [consequences]="migration.affectedContracts"
        >
        </app-usage-migration-consequences-table>
      </app-card>

      <app-card *ngIf="migration.affectedDataProcessingRegistrations !== undefined && migration.affectedDataProcessingRegistrations.length > 0">
        <app-usage-migration-consequences-table
        title="Følgende registreringer i modulet 'Databehandling' berøres:"
        i18n-title
        [consequences]="migration.affectedDataProcessingRegistrations"
        >
        </app-usage-migration-consequences-table>
      </app-card>


    </ng-container>
    <app-dialog-actions *ngIf="hasConsequences() | async">
      <app-checkbox
        [(value)]="hasAcceptedConsequences"
        labelPosition="after"
        text="Jeg forstår og accepterer ovenstående konsekvenser"
        i18n-text
      >
      </app-checkbox>
    </app-dialog-actions>
    <app-dialog-actions>
      <app-button
        (buttonClick)="onCancel()"
        i18n
      >
      Annuler</app-button>
      <app-button
        (buttonClick)="onConfirm()"
        i18n
        [disabled]="(isConfirmDisabled() | async) === true"
        >
        Gennemfør flytning
      </app-button>
    </app-dialog-actions>
    <app-loading *ngIf="(loading$ | async) === true"></app-loading>
  </app-standard-vertical-content-grid>

</app-scrollbar-dialog>
