<div *ngIf="formGroup" [formGroup]="formGroup">
  <ng-select
    *ngIf="!renderHierarchy"
    class="{{ size }}"
    [formControlName]="formName"
    [placeholder]="text"
    [items]="data ?? []"
    [bindLabel]="textField"
    [loading]="loading || false"
    [clearAllText]="clearAllText"
    [loadingText]="loadingText"
    [notFoundText]="notFoundText"
    (search)="filter$.next($event.term)"
    (change)="formSelectionChange($event)"
    (clear)="filter$.next('')"
  ></ng-select>
  <ng-select
    *ngIf="renderHierarchy"
    class="{{ size }}"
    [formControlName]="formName"
    [placeholder]="text"
    [items]="data ?? []"
    [bindLabel]="textField"
    [loading]="loading || false"
    [clearAllText]="clearAllText"
    [loadingText]="loadingText"
    [notFoundText]="notFoundText"
    [searchFn]="customSearchFunction"
    (search)="filter$.next($event.term)"
    (change)="formSelectionChange($event)"
    (clear)="filter$.next('')"
    ><ng-template ng-option-tmp let-item="item">
      <ng-container *ngFor="let number of [].constructor(item.indent)">&nbsp;&nbsp;&nbsp;&nbsp;</ng-container>
      {{ item.name }}
    </ng-template></ng-select
  >
</div>

<ng-select
  *ngIf="!formGroup"
  class="{{ size }}"
  [placeholder]="text"
  [items]="data ?? []"
  [bindLabel]="textField"
  [loading]="loading || false"
  [readonly]="disabled"
  [clearAllText]="clearAllText"
  [loadingText]="loadingText"
  [notFoundText]="notFoundText"
  [(ngModel)]="value"
  (search)="filter$.next($event.term)"
  (change)="valueChange.emit($event)"
  (clear)="filter$.next('')"
>
  <ng-template *ngIf="showSearchHelpText && !!!(filter$ | async)" ng-footer-tmp>
    <app-paragraph paragraphSize="x-small" i18n>Brug søgning for at få flere resultater</app-paragraph>
  </ng-template>
</ng-select>

<app-textbox-info *ngIf="description">
  <app-paragraph paragraphSize="x-small">{{ description }}</app-paragraph>
</app-textbox-info>
